<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 重复字符数
      const str = 'aabcccccaaa';
      function compress(str) {
        const arr = str.split('');
        const newArr = [];
        for (let i = 0; i < arr.length; i++) {
          let count = 1;
          while (arr[i] === arr[i + 1]) {
            count++;
            i++;
          }
          newArr.push(arr[i], count);
        }
        return newArr.join('');
      }
      console.log(compress(str));

      // 最大和
      const nums = [-2, 1, -3, 4, -1, 2, 1, -5, 4];
      var maxSubArray = function (nums) {
        let max = nums[0];
        for (let i = 1; i < nums.length; i++) {
          nums[i] = Math.max(nums[i], nums[i] + nums[i - 1]);
          max = Math.max(max, nums[i]);
        }
        return max;
      };
      console.log(maxSubArray(nums));

      // 函数柯里化

      function sum(...args) {
        let _args = args;
        const result = (...args) => {
          _args = [..._args, ...args];
          console.log(_args, '_args');
          return result;
        };
        result.toString = function () {
          return _args.reduce((pre, cur) => pre + cur, 0);
        };
        return result;
      }
      console.log(sum(1, 2)(3)(4, 5).toString());

      // 睡眠函数
      function sleep(timer) {
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve();
          }, timer);
        });
      }
      async function test() {
        console.log('开始');
        await sleep(3000);
        console.log('延迟了3秒');
      }
      test();

      // 实现两数组取交集
      const arr1 = [1, 2, 3, 4, 5];
      const arr2 = [2, 3, 4, 6, 8];
      function intersection(arr1, arr2) {
        return arr1.filter((item) => arr2.includes(item));
      }
      console.log(intersection(arr1, arr2));
    </script>
  </body>
</html>
