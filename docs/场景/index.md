### 对 axios 二次封装

1. 添加请求拦截器，添加 token、cookie、请求体加验证、设置请求头等
2. 添加响应拦截器，处理错误、返回数据、设置 token、cookie 等

### 从代码提交到上线流程（pdlc 软件发布的生命周期）

1. 从主分支新建业务开发分支，完成功能开发后提交代码
2. 创建 Pull Request（PR），经过自动化代码检查、单元测试和同事人工审核，确保代码质量。审核通过后，合并更改至主分支。
3. 合并到主分支的更改通过 Webhooks 事件自动触发持续集成流程，开始构建部署
4. 使用脚本自动化构建和打包代码。构建成功后，利用构建工具读取项目中的 Dockerfile，生成 Docker 镜像，并推送至远程镜像仓库
5. 利用云效平台的 AppStack 功能进行应用部署，持续集成。

### 如何通知用户更新了

通过获取文档，对比前后是否一致进行比较

### k8s，vm（虚拟机）区别

vm 是一种虚拟化技术。是一个单机，通过不同文件夹指向不同项目，可部署多个。
k8s 是通过 yaml 配置文件来定义应用程序的部署，更新镜像，管理容器等
核心组件
pods：基本部署单元，一个 pod 可包含一个或者多个容器
igress：管理外部访问集群内服务的规则
depolyment：管理 pod 的声明和更新，确保 pod 始终以期望的数量运行
serives：定义 pod 的逻辑和访问它们的策略，通常用于内部服务器发现和负载均衡。

### 构建项目

执行创建命令。pnpm umi create (提供参数和变量)-->通过 cli（工具箱，脚本解析，放进占位符）-->download 云模版（仓库中提前维护好的）

### 项目如何做的权限管理

基于角色的权限控制策略：
接口层：通过 axios 拦截器去做，当用户访问一个未授权的接口时，服务端返回一个 401，403 的状态码，前端会自动跳转到登录页面。
菜单层：服务端返回一个对应的权限菜单，在前端根据权限菜单渲染对应的路由。
封装递归菜单
路由层：1.直接在前端挂载全部用户可以访问的路由，通过路由守卫去控制访问权限 vue 中可以在每个路由的声明中家 meta 信息，标记当前路由的授权访问角色 react 中封装一个自己的组件和 roles 列表进行匹配，然后根据匹配结果决定是否渲染该组件。2.动态添加
组件层：封装组件或指令，具体：通过后台返回数据获取 全集权限 code

### 近期做过的一个项目

是一个基础平台，主要的功能是使⽤户能够通过单⼀⼊⼝访问公司多个项⽬，主要包括登录，企业认证，企业管理，角色管理，合同模版管理，站内信管理等基本信息管理功能。我主要负责其中登录，认证，企业审批等多个模块的开发。主要通过 qiankun 框架的子应用机制，将多个项目打包成子应用，并通过主应用进行统一管理来实现 跨项目访问。

### 项目基座 chassis

chassis：提供一些公用的组件和工具库，统一的 layout 和编码规范。
qiankun：子应用挂载在主应用的某一个 dom 下，可以挂载多个，可以使每个项目有在浏览器中有自己的运行时，在主应用中通过 entry 路径（HTML Entry 接入方式），加载对应项目的 html 后进行包裹挂载。
**qiankun 怎么做到隔离？**
通过一些沙箱隔离机制，比如，创建了 window 的副本（fakeWindow），并使用 Proxy 代理来拦截对 window 的访问和赋值，从而避免子应用对主应用全局状态的直接影响

### 项目的难点和亮点

亮点： 我们利用 qiankun 拆分的微前端，按功能拆分系统，独立开发、部署、维护。
各个系统的公共部分，例如：通用方法、组件、eslint/prettierrc 配置，都由 chassis 包统一管理，能确保所有项目的标准都是统一的。
与后端一起做约定的标准化接口，利用 node 脚本解析 swagger-json 自动生成 api 方法。
难点：vue 中有些函数，react 没有对应的 hooks，写自定义 hooks，对 react 的了程度
