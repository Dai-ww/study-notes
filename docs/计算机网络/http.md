### HTTP1.0、HTTP1.1 和 HTTP2.0 的区别

- 区别一 (多路复用)

  在 http1.x 中，为了性能考虑，通常会引入雪碧图、将小图内联、使用多个域名等方式，这一切是因为浏览器限制了同一个域名下的请求数量，由于页面需要请求很多资源，对头阻塞会导致在达到最大的请求量时，剩余的请求资源得等到其他资源请求完成之后才能发起请求。
  而在 http2.0 中，因为引入了多路复用，做到同一个连接并发处理多个请求，而且并发请求的数量比 HTTP1.1 大了好几个数量级。

- 区别二

  http1.0 需要使用 keep-alive 参数告知服务器建立一个长连接，但是 http1.1 默认支持长连接

- 区别三 (二进制格式编码)

  http1.x 都是通过文本的形式传输数据，在 http2.0 中引入了新的编码机制，所有的传输数据都会被分割，并采用二进制格式编码

- 区别四 (服务器 Push)

  在 http2.0 中，服务端可以在客户某个请求后，主动推送其他资源。比如某些资源客户端一定是会请求的，这时候可以采用服务端的 push 技术，提前给客户端推送必要的资源，这样减少延迟时间。

- 区别五 (Header 压缩)

  http1.x 中，以文本的形式传输 header，在 header 携带 cookie 情况下，可能每次都需要重复传输几百到几千的字节
  在 http2.0 中，使用了 HPACK 压缩格式对传输的 header 进行编码，减少了 header 的大小。在网络中传输会更快。

### http2 的多路复用

> 在一个连接里，客户端和浏览器都可以同时发送多个请求或响应。采用了数据流，对同一个响应或请求的所有数据包做了一个独一无二的标识，所以可以不用等待发送，两端会根据标识组装数据流,而且不用按照顺序一一对应。

**例如**：在一个 TCP 连接里面服务器同时收到了 A 请求和 B 请求，于是先回应请求 A，结果发现处理过程非常耗时，于是就发送 A 请求已经处理好的部分，接着回应 B 请求，完成后。再发送 A 请求剩下的部分。

- Http1.0:每个 TCP 连接只能发送一个请求。发送数据完毕，连接就关闭。为了解决这个问题，需要使用 keep-alive 这个字段。
- Http1.1:引入了持久连接，即 TCP 连接默认不关闭，可以被多个请求复用，不用声明 keep-alive，在同一个 TCP 连接中可以发送多个请求，但是所有数据通行是按次序进行的。服务器处理完一个回应，才会进行下一个。

### https 握手过程

1. 客户端访问 web 服务器，请求建立 ssl 连接。
2. 服务器收到请求后，将网站的证书传送一份给客户端。
3. 客户端验证证书的颁发机构和过期时间，没有问题则随机生成一个密钥。传送给服务器，服务器利用自己的私钥解密出会话密钥。
4. 服务器与客户端使用秘钥加密传输

##### HTTPS 握手过程中，客户端如何验证证书的合法性

1. 首先浏览器读取证书中的所有者、有效期等信息，校验证书的网站域名，是否于颁发域名一致，校验证书的有效期。
2. 查找操作系统中内置的受信任的发布机构 CA，与服务器发送的相比对。
3. 如果找到，则从操作系统中取出 CA 的公钥（一般会事先在内部植入常用公钥）然后对服务器发送的证书里面的签名进行解密。
4. 使用相同的 hash 算法计算出证书的 hash 值，然后将这个 hash 值与证书中签名做对比，如果一致，则证明合法。

### http 状态码的理解

- 1xx （临时响应）：信息，服务器收到请求，需要请求者继续执行操作
- 2xx （成功）：操作成功
- 3xx （重定向）：需要进一步的操作以完成请求
- 4xx （客户端错误）：请求包含语法错误或无法完成请求
- 5xx （服务器错误）：请求包含语法错误或无法完成请求

**常见状态码**：

1. 101 Switching Protocols 切换协议。服务器根据客户端的请求切换协议。
2. 200 OK 请求成功。一般用于 GET 与 POST 请求.
3. 301 Moved Permanently 永久移动。请求的资源已被永久的移动到新 URI.
4. 304 Not Modified 未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源.
5. 400 Bad Request 客户端请求的语法错误，服务器无法理解
6. 401 Unauthorized 请求要求用户的身份认证
7. 404 Not Found 服务器无法根据客户端的请求找到资源（网页）。
8. 500 Internal Server Error 服务器内部错误，无法完成请求
9. 502 Bad Gateway 作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应
10. 503 Service Unavailable 由于超载或系统维护，服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的 Retry-After 头信息中
